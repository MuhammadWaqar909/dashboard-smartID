{"version":3,"sources":["../node_modules/@coreui/icons/js/free/cil-lock-locked.js","assets/spinner.gif","views/pages/login/Login.js"],"names":["cilLockLocked","Login","React","Component","constructor","props","super","this","state","isLoading","email","pass","token","loggedIn","error","url","process","onChange","bind","formSubmit","e","setState","target","id","value","preventDefault","login","userEmail","userPass","console","log","fetch","method","headers","body","JSON","stringify","password","then","res","json","result","message","token_type","access_token","user","render","localStorage","setItem","to","className","md","onSubmit","type","placeholder","required","icon","size","xs","style","width","height","src","spinner","alt","color"],"mappings":"4KAAA,kCAAO,MAAMA,EAAgB,CAAC,UAAU,+Q,6ECAzB,MAA0B,oC,0BCoBzC,MAAMC,UAAcC,IAAMC,UACxBC,YAAYC,GACVC,MAAMD,GAGNE,KAAKC,MAAQ,CACXC,WAAW,EACXC,MAAO,GACPC,KAAM,GACNC,MAAO,GACPC,UAPa,EAQbC,MAAO,SACPC,IAAKC,wCAEPT,KAAKU,SAAWV,KAAKU,SAASC,KAAKX,MACnCA,KAAKY,WAAaZ,KAAKY,WAAWD,KAAKX,MAGzCU,SAASG,GACPb,KAAKc,SAAS,CACZ,CAACD,EAAEE,OAAOC,IAAKH,EAAEE,OAAOE,QAI5BL,WAAWC,GACTA,EAAEK,iBACF,MAAM,MAAEf,EAAF,KAASC,GAASJ,KAAKC,MAC7BD,KAAKc,SAAS,CAAEZ,WAAW,IAE3BF,KAAKmB,MAAMhB,EAAOC,GAGpBe,MAAMC,EAAWC,GACfC,QAAQC,IAAR,UAAeH,EAAf,aAA6BC,IAE7BG,MAAMxB,KAAKC,MAAMO,IAAM,iBAAkB,CACvCiB,OAAQ,OACRC,QAAS,CAAE,eAAgB,mBAAoB,8BAA+B,UAC9EC,KAAMC,KAAKC,UAAU,CAAE1B,MAAOiB,EAAWU,SAAUT,MAElDU,MAAMC,GAAQA,EAAIC,SAClBF,MAAMG,IACkB,iBAAnBA,EAAOC,QACTnC,KAAKc,SAAS,CACZR,UAAU,EACVD,MAAO6B,EAAOE,WAAa,IAAMF,EAAOG,aACxCC,KAAMJ,EAAOI,OAGftC,KAAKc,SAAS,CACZZ,WAAW,EACXK,MAAO,eAMjBgC,SACE,OAAIvC,KAAKC,MAAMK,UACbkC,aAAaC,QAAQ,QAASzC,KAAKC,MAAMI,OACzCmC,aAAaC,QAAQ,OAAQb,KAAKC,UAAU7B,KAAKC,MAAMqC,OAChD,cAAC,IAAD,CAAUI,GAAG,gBAGpB,qBAAKC,UAAU,qDAAf,SACE,cAAC,IAAD,CAAYA,UAAU,OAAtB,SACE,cAAC,IAAD,CAAMA,UAAU,yBAAhB,SACE,cAAC,IAAD,CAAMC,GAAG,IAAT,SACE,cAAC,IAAD,UACE,cAAC,IAAD,CAAOD,UAAU,MAAjB,SACE,cAAC,IAAD,UACE,eAAC,IAAD,CAAOE,SAAU7C,KAAKY,WAAtB,UACE,uCACA,mBAAG+B,UAAU,aAAb,qCACA,eAAC,IAAD,CAAaA,UAAU,OAAvB,UACE,cAAC,IAAD,CAAiB3B,GAAG,eAApB,eACA,cAAC,IAAD,CACE8B,KAAK,OACLC,YAAY,QACZ/B,GAAG,QACHC,MAAOjB,KAAKC,MAAME,MAClBO,SAAUV,KAAKU,SACfsC,UAAQ,OAGZ,eAAC,IAAD,CAAaL,UAAU,OAAvB,UAIE,cAAC,IAAD,CAAiB3B,GAAG,eAApB,SACE,cAAC,IAAD,CAAOiC,KAAMxD,IAAeyD,KAAK,SAEnC,cAAC,IAAD,CACEJ,KAAK,WACLC,YAAY,WACZ/B,GAAG,OACHC,MAAOjB,KAAKC,MAAM6B,SAClBpB,SAAUV,KAAKU,SACfsC,UAAQ,OAGZ,cAAC,IAAD,UACE,cAAC,IAAD,CAAML,UAAW3C,KAAKC,MAAMM,MAAOqC,GAAG,KAAtC,SACE,oBAAID,UAAU,cAAd,mCAGJ,cAAC,IAAD,UACE,eAAC,IAAD,CAAMQ,GAAG,IAAT,UACGnD,KAAKC,MAAMC,WACV,qBAAKkD,MAAO,CAAEC,MAAO,OAAQC,OAAQ,QAArC,SACE,qBACEC,IAAKC,EACLJ,MAAO,CAAEC,MAAO,OAAQC,OAAQ,QAChCG,IAAI,qBAIRzD,KAAKC,MAAMC,WACX,cAAC,IAAD,CAASwD,MAAM,UAAUZ,KAAK,SAASH,UAAU,OAAjD,0CAkBbjD","file":"static/js/9.7cb5bf74.chunk.js","sourcesContent":["export const cilLockLocked = [\"512 512\",\"<path fill='var(--ci-primary-color, currentColor)' d='M384,200V144a128,128,0,0,0-256,0v56H88V328c0,92.635,75.364,168,168,168s168-75.365,168-168V200ZM160,144a96,96,0,0,1,192,0v56H160ZM392,328c0,74.99-61.01,136-136,136s-136-61.01-136-136V232H392Z' class='ci-primary'/>\"]","export default __webpack_public_path__ + \"static/media/spinner.a6a3a828.gif\";","import React from 'react'\nimport { Redirect } from 'react-router-dom'\nimport CIcon from '@coreui/icons-react'\nimport spinner from '../../../assets/spinner.gif'\nimport { cilLockLocked } from '@coreui/icons'\nimport {\n  CButton,\n  CCard,\n  CCardBody,\n  CCardGroup,\n  CCol,\n  CContainer,\n  CForm,\n  CFormInput,\n  CInputGroup,\n  // CInputGroupPrepend,\n  CInputGroupText,\n  CRow,\n} from '@coreui/react'\n// import { CIcon } from '@coreui/icons-react'\nclass Login extends React.Component {\n  constructor(props) {\n    super(props)\n    let loggedIn = false\n\n    this.state = {\n      isLoading: false,\n      email: '',\n      pass: '',\n      token: '',\n      loggedIn,\n      error: 'd-none',\n      url: process.env.REACT_APP_API_URL,\n    }\n    this.onChange = this.onChange.bind(this)\n    this.formSubmit = this.formSubmit.bind(this)\n  }\n\n  onChange(e) {\n    this.setState({\n      [e.target.id]: e.target.value,\n    })\n  }\n\n  formSubmit(e) {\n    e.preventDefault()\n    const { email, pass } = this.state\n    this.setState({ isLoading: true })\n    // console.log(`${email}, ${pass}`)\n    this.login(email, pass)\n  }\n\n  login(userEmail, userPass) {\n    console.log(`${userEmail}, ${userPass}`)\n\n    fetch(this.state.url + 'api/auth/login', {\n      method: 'POST',\n      headers: { 'content-type': 'application/json', 'Access-Control-Allow-Origin': 'origin' },\n      body: JSON.stringify({ email: userEmail, password: userPass }),\n    })\n      .then((res) => res.json())\n      .then((result) => {\n        if (result.message !== 'Unauthorized') {\n          this.setState({\n            loggedIn: true,\n            token: result.token_type + ' ' + result.access_token,\n            user: result.user,\n          })\n        } else {\n          this.setState({\n            isLoading: false,\n            error: 'd-block',\n          })\n        }\n      })\n  }\n\n  render() {\n    if (this.state.loggedIn) {\n      localStorage.setItem('token', this.state.token)\n      localStorage.setItem('user', JSON.stringify(this.state.user))\n      return <Redirect to=\"/dashboard\" />\n    }\n    return (\n      <div className=\"c-app c-default-layout flex-row align-items-center\">\n        <CContainer className=\"mt-5\">\n          <CRow className=\"justify-content-center\">\n            <CCol md=\"8\">\n              <CCardGroup>\n                <CCard className=\"p-4\">\n                  <CCardBody>\n                    <CForm onSubmit={this.formSubmit}>\n                      <h1>Login</h1>\n                      <p className=\"text-muted\">Sign In to your account</p>\n                      <CInputGroup className=\"mb-3\">\n                        <CInputGroupText id=\"basic-addon1\">@</CInputGroupText>\n                        <CFormInput\n                          type=\"text\"\n                          placeholder=\"Email\"\n                          id=\"email\"\n                          value={this.state.email}\n                          onChange={this.onChange}\n                          required\n                        />\n                      </CInputGroup>\n                      <CInputGroup className=\"mb-4\">\n                        {/* <CInputGroupText>\n                          <CIcon name=\"cil-lock-locked\" />\n                        </CInputGroupText> */}\n                        <CInputGroupText id=\"basic-addon1\">\n                          <CIcon icon={cilLockLocked} size=\"lx\" />\n                        </CInputGroupText>\n                        <CFormInput\n                          type=\"password\"\n                          placeholder=\"Password\"\n                          id=\"pass\"\n                          value={this.state.password}\n                          onChange={this.onChange}\n                          required\n                        />\n                      </CInputGroup>\n                      <CRow>\n                        <CCol className={this.state.error} md=\"12\">\n                          <h3 className=\"text-center\">Email Not Founded</h3>\n                        </CCol>\n                      </CRow>\n                      <CRow>\n                        <CCol xs=\"6\">\n                          {this.state.isLoading && (\n                            <div style={{ width: '30px', height: '30px' }}>\n                              <img\n                                src={spinner}\n                                style={{ width: '100%', height: '100%' }}\n                                alt=\"Spinner/image\"\n                              />\n                            </div>\n                          )}\n                          {!this.state.isLoading && (\n                            <CButton color=\"primary\" type=\"submit\" className=\"px-4\">\n                              Login\n                            </CButton>\n                          )}\n                        </CCol>\n                      </CRow>\n                    </CForm>\n                  </CCardBody>\n                </CCard>\n              </CCardGroup>\n            </CCol>\n          </CRow>\n        </CContainer>\n      </div>\n    )\n  }\n}\n\nexport default Login\n"],"sourceRoot":""}