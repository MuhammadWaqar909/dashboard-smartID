(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[9],{358:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));const i=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M384,200V144a128,128,0,0,0-256,0v56H88V328c0,92.635,75.364,168,168,168s168-75.365,168-168V200ZM160,144a96,96,0,0,1,192,0v56H160ZM392,328c0,74.99-61.01,136-136,136s-136-61.01-136-136V232H392Z' class='ci-primary'/>"]},384:function(e,t,s){"use strict";s.r(t);var i=s(1),a=s.n(i),c=s(19),n=s(355),r=s.p+"static/media/spinner.a6a3a828.gif",o=s(358),l=s(353),h=s(16);class d extends a.a.Component{constructor(e){super(e);this.state={isLoading:!1,email:"",pass:"",token:"",loggedIn:!1,error:"d-none",url:"https://smartid.smartmicros.com/api/"},this.onChange=this.onChange.bind(this),this.formSubmit=this.formSubmit.bind(this)}onChange(e){this.setState({[e.target.id]:e.target.value})}formSubmit(e){e.preventDefault();const{email:t,pass:s}=this.state;this.setState({isLoading:!0}),this.login(t,s)}login(e,t){console.log("".concat(e,", ").concat(t)),fetch(this.state.url+"api/auth/login",{method:"POST",headers:{"content-type":"application/json","Access-Control-Allow-Origin":"origin"},body:JSON.stringify({email:e,password:t})}).then((e=>e.json())).then((e=>{"Unauthorized"!==e.message?this.setState({loggedIn:!0,token:e.token_type+" "+e.access_token,user:e.user}):this.setState({isLoading:!1,error:"d-block"})}))}render(){return this.state.loggedIn?(localStorage.setItem("token",this.state.token),localStorage.setItem("user",JSON.stringify(this.state.user)),Object(h.jsx)(c.a,{to:"/dashboard"})):Object(h.jsx)("div",{className:"c-app c-default-layout flex-row align-items-center",children:Object(h.jsx)(l.l,{className:"mt-5",children:Object(h.jsx)(l.J,{className:"justify-content-center",children:Object(h.jsx)(l.k,{md:"8",children:Object(h.jsx)(l.i,{children:Object(h.jsx)(l.g,{className:"p-4",children:Object(h.jsx)(l.h,{children:Object(h.jsxs)(l.s,{onSubmit:this.formSubmit,children:[Object(h.jsx)("h1",{children:"Login"}),Object(h.jsx)("p",{className:"text-muted",children:"Sign In to your account"}),Object(h.jsxs)(l.z,{className:"mb-3",children:[Object(h.jsx)(l.A,{id:"basic-addon1",children:"@"}),Object(h.jsx)(l.t,{type:"text",placeholder:"Email",id:"email",value:this.state.email,onChange:this.onChange,required:!0})]}),Object(h.jsxs)(l.z,{className:"mb-4",children:[Object(h.jsx)(l.A,{id:"basic-addon1",children:Object(h.jsx)(n.a,{icon:o.a,size:"lx"})}),Object(h.jsx)(l.t,{type:"password",placeholder:"Password",id:"pass",value:this.state.password,onChange:this.onChange,required:!0})]}),Object(h.jsx)(l.J,{children:Object(h.jsx)(l.k,{className:this.state.error,md:"12",children:Object(h.jsx)("h3",{className:"text-center",children:"Email Not Founded"})})}),Object(h.jsx)(l.J,{children:Object(h.jsxs)(l.k,{xs:"6",children:[this.state.isLoading&&Object(h.jsx)("div",{style:{width:"30px",height:"30px"},children:Object(h.jsx)("img",{src:r,style:{width:"100%",height:"100%"},alt:"Spinner/image"})}),!this.state.isLoading&&Object(h.jsx)(l.e,{color:"primary",type:"submit",className:"px-4",children:"Login"})]})})]})})})})})})})})}}t.default=d}}]);
//# sourceMappingURL=9.7cb5bf74.chunk.js.map