(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[12],{373:function(e,s,t){"use strict";t.r(s);var a=t(1),r=t.n(a),n=t(19),i=t(355),o=t(358);const l=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M411.6,343.656l-72.823-47.334,27.455-50.334A80.23,80.23,0,0,0,376,207.681V128a112,112,0,0,0-224,0v79.681a80.236,80.236,0,0,0,9.768,38.308l27.455,50.333L116.4,343.656A79.725,79.725,0,0,0,80,410.732V496H448V410.732A79.727,79.727,0,0,0,411.6,343.656ZM416,464H112V410.732a47.836,47.836,0,0,1,21.841-40.246l97.66-63.479-41.64-76.341A48.146,48.146,0,0,1,184,207.681V128a80,80,0,0,1,160,0v79.681a48.146,48.146,0,0,1-5.861,22.985L296.5,307.007l97.662,63.479h0A47.836,47.836,0,0,1,416,410.732Z' class='ci-primary'/>"];var c=t(353),d=t(16);class h extends r.a.Component{constructor(e){super(e),this.customerSubmit=e=>{e.preventDefault();let s={};if(this.handleValidation()){let e=this.state.fields,t={name:e.name,email:e.email,password:e.password,type:"customer"};fetch("https://smartid.smartmicros.com/api/api/customers",{method:"POST",headers:{"content-type":"application/json","Access-Control-Allow-Origin":"*",Authorization:this.state.auth},body:JSON.stringify(t)}).then((e=>e.json())).then((e=>{if(1==e.status)return Object(d.jsx)(n.a,{to:"#/customers"});Object.entries(e.messages).map((e=>{let[t,a]=e;s[t]=a})),this.setState({errors:s})}))}};const s=localStorage.getItem("token"),t=JSON.parse(localStorage.getItem("user"));let a=s,r=!0;null==a&&(r=!1),this.state={auth:a,user:t,fields:{},errors:{}}}componentDidMount(){}handleValidation(){let e=this.state.fields,s={},t=!0;if(e.name||(t=!1,s.name="Cannot be empty"),"undefined"!==typeof e.name&&(e.name.match(/^[a-zA-Z]+$/)||(t=!1,s.name="Only letters")),e.email||(t=!1,s.email="Cannot be empty"),"undefined"!==typeof e.email){let a=e.email.lastIndexOf("@"),r=e.email.lastIndexOf(".");a<r&&a>0&&-1==e.email.indexOf("@@")&&r>2&&e.email.length-r>2||(t=!1,s.email="Email is not valid")}return e.password||(t=!1,s.password="Cannot be empty"),e.conf_password||(t=!1,s.conf_password="Cannot be empty"),e.password&&e.conf_password&&e.password!==e.conf_password&&(t=!1,s.password="password mismatch"),this.setState({errors:s}),t}handleChange(e,s){let t=this.state.fields;t[e]=s.target.value,this.setState({fields:t})}render(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(c.J,{children:Object(d.jsx)(c.k,{children:Object(d.jsxs)(c.g,{children:[Object(d.jsx)(c.j,{children:"Customer Add"}),Object(d.jsx)(c.h,{className:"px-auto",children:Object(d.jsxs)(c.s,{onSubmit:this.customerSubmit,children:[Object(d.jsx)("h1",{children:"Customer"}),Object(d.jsx)("p",{className:"text-muted",children:"Create new Customer"}),Object(d.jsxs)(c.z,{className:"mb-3",children:[Object(d.jsx)(c.A,{id:"basic-addon1",children:Object(d.jsx)(i.a,{icon:l,size:"lx"})}),Object(d.jsx)(c.t,{type:"text",name:"name",placeholder:"Username",autoComplete:"username",onChange:this.handleChange.bind(this,"name"),value:this.state.fields.name}),Object(d.jsx)("div",{style:{color:"red"},children:this.state.errors.name})]}),Object(d.jsxs)(c.z,{className:"mb-3",children:[Object(d.jsx)(c.A,{id:"basic-addon1",children:"@"}),Object(d.jsx)(c.t,{type:"text",name:"email",placeholder:"Email",autoComplete:"email",onChange:this.handleChange.bind(this,"email"),value:this.state.fields.email}),Object(d.jsx)("div",{style:{color:"red"},children:this.state.errors.email})]}),Object(d.jsxs)(c.z,{className:"mb-3",children:[Object(d.jsx)(c.A,{id:"basic-addon1",children:Object(d.jsx)(i.a,{icon:o.a,size:"lx"})}),Object(d.jsx)(c.t,{type:"password",name:"password",placeholder:"Password",autoComplete:"new-password",onChange:this.handleChange.bind(this,"password"),value:this.state.fields.password}),Object(d.jsx)("span",{style:{color:"red"},children:this.state.errors.password})]}),Object(d.jsxs)(c.z,{className:"mb-4",children:[Object(d.jsx)(c.A,{id:"basic-addon1",children:Object(d.jsx)(i.a,{icon:o.a,size:"lx"})}),Object(d.jsx)(c.t,{type:"password",name:"conf_password",placeholder:"Repeat password",autoComplete:"new-password",onChange:this.handleChange.bind(this,"conf_password"),value:this.state.fields.conf_password}),Object(d.jsx)("span",{style:{color:"red"},children:this.state.errors.conf_password})]}),Object(d.jsx)(c.e,{type:"submit",color:"success",block:!0,children:"Create Account"})]})})]})})})})}}s.default=h}}]);
//# sourceMappingURL=12.3e5b1f3d.chunk.js.map