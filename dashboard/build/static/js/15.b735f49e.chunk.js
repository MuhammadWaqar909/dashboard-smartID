(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[15],{382:function(e,t,i){"use strict";i.r(t);var s=i(1),a=i.n(s),o=i(19),l=i(356),r=i.n(l),c=i(353),n=i(16);let h;class d extends a.a.Component{constructor(e){super(e);const t=localStorage.getItem("token"),i=JSON.parse(localStorage.getItem("user"));h=[{key:"visitor_name",wrap:!0,minWidth:"120px",name:"Visitor Name",selector:e=>e.visitor_name,filterable:!0},{key:"visitor_company",wrap:!0,minWidth:"150px",name:"Visitor Company",selector:e=>e.visitor_company,filterable:!0},{key:"visitor_card_pic",name:"Card",wrap:!0,selector:e=>Object(n.jsx)("button",{style:{width:"100%",height:"50px",background:"none",outline:"none",border:"none",cursor:"pointer"},onClick:()=>this.toggle(e.visitor_card_pic),children:Object(n.jsx)("img",{style:{width:"100%",height:"100%"},src:"".concat("https://smartid.smartmicros.com/api/public/images/"+e.visitor_card_pic),alt:"card/jpg"})})},{key:"visitor_face_pic",name:"Face",wrap:!0,selector:e=>Object(n.jsx)("button",{style:{width:"100%",height:"50px",background:"none",outline:"none",border:"none",cursor:"pointer"},onClick:()=>this.toggle(e.visitor_face_pic),children:Object(n.jsx)("img",{style:{width:"100%",height:"100%"},src:"".concat("https://smartid.smartmicros.com/api/public/images/"+e.visitor_face_pic),alt:"card/jpg"})})},{key:"visiting_to",wrap:!0,name:"Visit To",selector:e=>e.visiting_to,filterable:!0},{key:"visit_purpose",wrap:!0,name:"Visitor Purpose",minWidth:"140px",selector:e=>e.visit_purpose,filterable:!0},{key:"time_in",wrap:!0,name:"Visit Date",selector:e=>e.time_in,filterable:!0},{key:"time_out",wrap:!0,name:"Time Out",selector:e=>e.time_out,filterable:!0},{key:"national_id",minWidth:"140px",wrap:!0,name:"National ID",selector:e=>e.national_id,filterable:!0},{key:"nationality",wrap:!0,minWidth:"140px",name:"Nationality",selector:e=>e.nationality,filterable:!0},{key:"user_id",wrap:!0,name:"Customer",selector:e=>e.customer_id,filterable:!0},{key:"ocr_data",name:"Details",wrap:!0,selector:e=>Object(n.jsx)("button",{onClick:()=>{this.toggleDetails(e.ocr_data)},children:"Show Data"})}];let s=t,a=!0;null==s&&(a=!1),this.state={auth:s,filterValue:"",user:i,datatable:[],pmodal:!1,cmodal:!1,pic_url:"",pending:!0,details:[],setDetails:""},this.toggle=this.toggle.bind(this),this.toggleDetails=this.toggleDetails.bind(this),this.closeDetails=this.closeDetails.bind(this),this.closePictureModel=this.closePictureModel.bind(this)}componentDidMount(){null!=this.state.auth&&fetch("https://smartid.smartmicros.com/api/api/visitors/3",{headers:{Authorization:this.state.auth}}).then((e=>e.json())).then((e=>{this.setState({pending:!1,datatable:e})}))}toggle(e){this.setState({pmodal:!this.state.pmodal,pic_url:e})}toggleDetails(e){let t=JSON.parse(e);this.setState({cmodal:!this.state.cmodal,setDetails:Object.keys(t),setDetails:Object.keys(t).map((e=>"".concat(e," = ").concat(t[e])))}),console.log(this.state.setDetails)}closeDetails(){this.setState({cmodal:!1,details:""})}closePictureModel(){this.setState({pmodal:!1})}render(){var e;if(null===this.state.auth)return Object(n.jsx)(o.a,{to:"/login"});const{datatable:t}=this.state;return console.log(null===(e=t[0])||void 0===e?void 0:e.id),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(c.J,{children:Object(n.jsx)(c.k,{children:Object(n.jsxs)(c.g,{children:[Object(n.jsx)(c.j,{children:"Visitors"}),Object(n.jsxs)(c.h,{children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("label",{htmlFor:"Search",children:Object(n.jsx)("strong",{children:"Search"})}),Object(n.jsx)("br",{}),Object(n.jsx)("input",{id:"Search",type:"text",placeholder:"Enter Filter",onChange:e=>(console.log(e.target.value),this.setState({filterValue:e.target.value}))})]}),Object(n.jsx)(r.a,{columns:h,data:t.filter((e=>e.visitor_name&&e.visitor_name.toLowerCase().includes(this.state.filterValue.toLowerCase())||e.visitor_company&&e.visitor_company.toLowerCase().includes(this.state.filterValue.toLowerCase())||e.id&&e.id.toString().toLowerCase().includes(this.state.filterValue.toString().toLowerCase())||e.visit_purpose&&e.visit_purpose.toString().toLowerCase().includes(this.state.filterValue.toString().toLowerCase()))),selectableRows:!0,direction:"auto",fixedHeaderScrollHeight:"300px",highlightOnHover:!0,pagination:!0,pointerOnHover:!0,selectableRowsHighlight:!0,selectableRowsNoSelectAll:!0,selectableRowsRadio:"checkbox",striped:!0,progressPending:this.state.pending,responsive:!0,subHeaderAlign:"right",subHeaderWrap:!0})]})]})})}),Object(n.jsxs)(c.C,{visible:this.state.pmodal,onClose:this.closePictureModel,children:[Object(n.jsx)(c.F,{children:"Picture"}),Object(n.jsx)(c.D,{children:Object(n.jsx)(c.y,{src:"https://smartid.smartmicros.com/api/public/images/"+this.state.pic_url,fluid:!0,className:"mb-2",thumbnail:!0,width:"480",height:"200"})}),Object(n.jsx)(c.E,{children:Object(n.jsx)(c.e,{color:"secondary",onClick:this.toggle,children:"Cancel"})})]}),Object(n.jsxs)(c.C,{visible:this.state.cmodal,onClose:this.closeDetails,children:[Object(n.jsx)(c.F,{closeButton:!0,children:"Details"}),Object(n.jsx)(c.D,{children:Object(n.jsx)(c.l,{children:this.state.setDetails})}),Object(n.jsx)(c.E,{children:Object(n.jsx)(c.e,{color:"secondary",onClick:this.closeDetails,children:"Close"})})]})]})}}t.default=d}}]);
//# sourceMappingURL=15.b735f49e.chunk.js.map